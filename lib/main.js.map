{"version":3,"sources":["../src/main.js"],"names":[],"mappings":";;eAA0B,QAAQ,QAAR,C;;IAAnB,e,YAAA,e;;AACP,IAAM,aAAa,QAAQ,mBAAR,CAAnB;AACA,IAAM,gBAAgB,QAAQ,kBAAR,EAA4B,OAAlD;AACA,IAAM,QAAQ,QAAQ,OAAR,EAAiB,yBAAjB,CAAd;;gBACmB,QAAQ,MAAR,C;;IAAZ,Q,aAAA,Q;;;AAEP,SAAS,UAAT,CAAqB,iBAArB,EAAwC,OAAxC,EAAiD,IAAjD,EAAuD;AACrD,MAAI,WAAW,OAAX,CAAJ,EAAyB;AACvB,WAAO,OAAP;AACA,cAAU,EAAV;AACD;AACD,MAAI,CAAC,iBAAL,EAAwB;AACtB,WAAO,KAAK,IAAI,KAAJ,CAAU,gCAAV,CAAL,CAAP;AACD;;AAED,SAAO,gBAAgB,iBAAhB,EAAmC,UAAU,GAAV,EAAe;AACvD,QAAI,GAAJ,EAAS,OAAO,KAAK,GAAL,CAAP;AACT,UAAM,gCAAN,EAAwC,SAAS,iBAAT,CAAxC;AACA,WAAO,KAAK,IAAL,EAAW,SAAS,iBAAT,EAA4B,OAA5B,CAAX,CAAP;AACD,GAJM,CAAP;AAKD;;AAED,SAAS,QAAT,CAAmB,iBAAnB,EAAsC,OAAtC,EAA+C;AAC7C,SAAO,SAAS,SAAT,CAAoB,SAApB,EAA+B,MAA/B,EAAuC,QAAvC,EAAiD;AACtD,QAAI,WAAW,MAAX,CAAJ,EAAwB;AACtB,iBAAW,MAAX;AACA,eAAS,EAAT;AACD;AACD,QAAI,aAAa,IAAjB,EAAuB;AACrB,aAAO,SAAS,IAAI,KAAJ,CAAU,8BAAV,CAAT,CAAP;AACD;;AAED,QAAI,KAAK,IAAI,aAAJ,CAAqB,iBAArB,SAA0C,SAA1C,EAAuD,OAAvD,CAAT;AACA,QAAI,WAAW,IAAf,EAAqB;AACnB,aAAO,SAAS,IAAT,EAAe,UAAU,MAAV,EAAkB,GAAlB,EAAuB,IAAvB,EAA6B;AACjD,WAAG,MAAH,CAAU,MAAV,EAAkB,UAAU,GAAV,EAAe,MAAf,EAAuB;AACvC,mBAAS,UAAU,EAAnB;AACA,eAAK,GAAL,EAAU,OAAO,IAAjB,EAAuB,OAAO,IAA9B,EAAoC,OAAO,OAA3C;AACD,SAHD;AAID,OALM,CAAP;AAMD;;AAED,OAAG,MAAH,CAAU,MAAV,EAAkB,UAAU,GAAV,EAAe,MAAf,EAAuB;AACvC,eAAS,UAAU,EAAnB;AACA,eAAS,GAAT,EAAc,OAAO,IAArB,EAA2B,OAAO,IAAlC,EAAwC,OAAO,OAA/C;AACD,KAHD;AAID,GAvBD;AAwBD;;AAED,WAAW,aAAX,GAA2B,aAA3B;AACA,WAAW,QAAX,GAAsB,QAAQ,aAAR,EAAuB,QAA7C;AACA,OAAO,OAAP,GAAiB,UAAjB","file":"main.js","sourcesContent":["const {ensureDirectory} = require('./util')\nconst isFunction = require('lodash/isFunction')\nconst EmailTemplate = require('./email-template').default\nconst debug = require('debug')('email-templates:creator')\nconst {basename} = require('path')\n\nfunction exportable (templateDirectory, options, done) {\n  if (isFunction(options)) {\n    done = options\n    options = {}\n  }\n  if (!templateDirectory) {\n    return done(new Error('templateDirectory is undefined'))\n  }\n\n  return ensureDirectory(templateDirectory, function (err) {\n    if (err) return done(err)\n    debug('Creating Email Templates in %s', basename(templateDirectory))\n    return done(null, template(templateDirectory, options))\n  })\n}\n\nfunction template (templateDirectory, options) {\n  return function _template (directory, locals, callback) {\n    if (isFunction(locals)) {\n      callback = locals\n      locals = {}\n    }\n    if (directory == null) {\n      return callback(new Error('templateName was not defined'))\n    }\n\n    var et = new EmailTemplate(`${templateDirectory}/${directory}`, options)\n    if (locals === true) {\n      return callback(null, function (locals, dir, next) {\n        et.render(locals, function (err, result) {\n          result = result || {}\n          next(err, result.html, result.text, result.subject)\n        })\n      })\n    }\n\n    et.render(locals, function (err, result) {\n      result = result || {}\n      callback(err, result.html, result.text, result.subject)\n    })\n  }\n}\n\nexportable.EmailTemplate = EmailTemplate\nexportable.requires = require('consolidate').requires\nmodule.exports = exportable\n"]}